## Redux - бойлерплейт

Для начала разберем высказывания двух авторов Redux, которые сейчас работают в Facebook над ядром React'а.

### Andrew Clark: Что мы упустили? 
![Tweet Andrew Clark](./tweet_andrew_clark.png)
> Redux - это простой EventEmitter c непропорционально крутой экосистемой инструментов, построенных на нем. Интересно, каковы издержки альтернативных возможностей этой экосистемы (какие возможности мы упустили). Представьте если бы они были построены на чем-то более мощном, например React'е.

А ведь действительно, какие возможности мы профукали? Что мы потеряли выбрав Redux, а не что-то другое? Может быть другая библиотека дала бы нам больше возможностей и потребовала меньшего написания кода? И сейчас, возможно, у Vue было бы в разы меньше звездочек.


### Dan Abramov: А надо ли что-то усложнять?
![Tweet Dan Abramov](./tweet_dan_abramov.png)
> Redux по сути очень прост. И его концепт великолепен. Но стало бы лучше, если ядро было менее примитивным? Сейчас его можно описать так:
```js
dispatch(action) {
  state = reducer(state, action);
  subscribers.forEach(s => s());
}
```

Меняем стейт через экшн и интерфейс магическим образом перерисовывается. Да, у редакса есть trade-offы - по дизайну требуется описывать стейт и его изменения как простые объекты и описывать логику простыми функциями. Действительно, куда проще? Ведь народ может дописать всякие помогайки под свои задачи. Вон как здорово Vue написали (сарказм). На самом деле, надо просто сильно взвесить подходит ли вам этот инструмент или нет. Вот есть хорошая статья от Дэна https://medium.com/@dan_abramov/you-might-not-need-redux-be46360cf367

### Давайте посмотрим на проблемы со стороны девелоперского опыта

Вот был неплохой рускоязычный опрос: https://docs.google.com/forms/d/1i7B3-61qmd5kC53qVG8aWrteyXU7gN2ffAPy_JLPxz8/edit#responses
В двух словах, у половины любовь с Redux'ом и все хорошо, у другой половины отторжение.

Давайте пройдемся по жалобам и проблемам:

Первым делом все жалуются на обезьянство "добавь константу, добавь экшен, добавь обработку в редюсер". И действительно, самая большая боль в написанине кучи кода. А когда у вас много кода, его долго читать, больше мест ошибиться и сложнее проводить рефакторинг. Но с другой стороны кто-то видит в этом хорошее разделение логики от представления и получает больше плюсов, чем минусов.

Вторая острая проблема в грамотном построении Стора. Советуют держать нормализованный стейт, не дублировать данные, бить редьюсеры на маленькие, переиспользовать action'ы в разных редьюсерах (1 action !== 1 handler в редьюсере). Не дай бог, кто-то решит зарефакторить большой и страшный стор, без статического анализа можно застрелиться.

Третья проблема это работа с сервером. Данные надо правильно переваривать и складывать в стор. В любом случае для работы с сервером надо городить что-то свое и хорошо покрывать тестами.

Если что-то поменялось - структура стора или ответы сервера, то без тестов и статического анализа будет очень тяжело разобраться. Но обычно ящик пива и бессонная ночь спасают ситуацию. Ведь везде простые объекты и функции. Побольше внимательности и терпения. Сам Redux прост и красив. Всю сложность мы уже сами накручиваем поверх него, а потом дружно жалуемся на бойлерплейт и проблемы со стором. Ну коль жалуемся, значит можно попробовать что-то другое, что будет приносить больше радости.

### А что если с сервером и стором работать по другому?
Смотрим на сервер и обмен данными.


... WIP: Еще в работе ...

